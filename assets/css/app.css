@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=Liter&display=swap");

@import "tailwindcss";
@source "../../lib/**/*.{heex,ex,exs}";

@theme extend {
    /* Fonts */
    --font-sans: "Liter", "sans-serif";
    --font-mono: "IBM Plex Mono", "monospace";

    /* Primary Accent - primary */
    --color-primary-50: oklch(0.98 0.02 290);
    --color-primary-100: oklch(0.95 0.04 290);
    --color-primary-200: oklch(0.9 0.08 290);
    --color-primary-300: oklch(0.8 0.14 290);
    --color-primary-400: oklch(0.7 0.19 290);
    --color-primary-500: oklch(0.6 0.25 290);
    --color-primary-600: oklch(0.5 0.22 290);
    --color-primary-700: oklch(0.4 0.18 290);
    --color-primary-800: oklch(0.3 0.14 290);
    --color-primary-900: oklch(0.2 0.1 290);

    /* Secondary Accent */
    --color-verdant-50: oklch(0.98 0.01 170);
    --color-verdant-100: oklch(0.95 0.03 170);
    --color-verdant-200: oklch(0.9 0.06 170);
    --color-verdant-300: oklch(0.8 0.1 170);
    --color-verdant-400: oklch(0.7 0.15 170);
    --color-verdant-500: oklch(0.6 0.19 170);
    --color-verdant-600: oklch(0.5 0.17 170);
    --color-verdant-700: oklch(0.4 0.14 170);
    --color-verdant-800: oklch(0.3 0.11 170);
    --color-verdant-900: oklch(0.2 0.08 170);

    /* Tertiary Accent */
    --color-pink-50: oklch(0.98 0.02 350);
    --color-pink-100: oklch(0.95 0.05 350);
    --color-pink-200: oklch(0.92 0.09 350);
    --color-pink-300: oklch(0.85 0.15 350);
    --color-pink-400: oklch(0.75 0.19 350);
    --color-pink-500: oklch(0.65 0.25 350);
    --color-pink-600: oklch(0.55 0.23 350);
    --color-pink-700: oklch(0.45 0.2 350);
    --color-pink-800: oklch(0.35 0.15 350);
    --color-pink-900: oklch(0.25 0.1 350);

    /* Complementary Color */
    --color-electric-50: oklch(0.97 0.02 220);
    --color-electric-100: oklch(0.94 0.05 220);
    --color-electric-200: oklch(0.9 0.1 220);
    --color-electric-300: oklch(0.82 0.15 220);
    --color-electric-400: oklch(0.72 0.2 220);
    --color-electric-500: oklch(0.62 0.24 220);
    --color-electric-600: oklch(0.52 0.21 220);
    --color-electric-700: oklch(0.42 0.18 220);
    --color-electric-800: oklch(0.32 0.14 220);
    --color-electric-900: oklch(0.22 0.1 220);

    /* Main Theme Background */
    --color-midnight-50: oklch(0.75 0.001 280);
    --color-midnight-100: oklch(0.64 0.001 280);
    --color-midnight-200: oklch(0.59 0.001 280);
    --color-midnight-300: oklch(0.51 0.001 280);
    --color-midnight-400: oklch(0.42 0.001 280);
    --color-midnight-500: oklch(0.3 0.003 280);
    --color-midnight-600: oklch(0.21 0.003 280);
    --color-midnight-700: oklch(0.18 0.003 280);
    --color-midnight-800: oklch(0.15 0.003 280);
    --color-midnight-900: oklch(0.09 0.005 280);

    /* Text Contrast Colors */
    --color-cybertext-50: oklch(0.99 0.01 280);
    --color-cybertext-100: oklch(0.97 0.02 280);
    --color-cybertext-200: oklch(0.95 0.03 280);
    --color-cybertext-300: oklch(0.93 0.04 280);
    --color-cybertext-400: oklch(0.9 0.04 280);
    --color-cybertext-500: oklch(0.85 0.03 280);
    --color-cybertext-600: oklch(0.8 0.02 280);
    --color-cybertext-700: oklch(0.75 0.02 280);
    --color-cybertext-800: oklch(0.7 0.01 280);
    --color-cybertext-900: oklch(0.65 0.01 280);

    /* Success Colors */
    --color-success-50: oklch(0.97 0.03 135);
    --color-success-100: oklch(0.94 0.06 135);
    --color-success-200: oklch(0.89 0.1 135);
    --color-success-300: oklch(0.82 0.15 135);
    --color-success-400: oklch(0.75 0.2 135);
    --color-success-500: oklch(0.68 0.23 135);
    --color-success-600: oklch(0.58 0.2 135);
    --color-success-700: oklch(0.48 0.17 135);
    --color-success-800: oklch(0.38 0.14 135);
    --color-success-900: oklch(0.28 0.1 135);

    /* Error Colors */
    --color-error-50: oklch(0.97 0.02 30);
    --color-error-100: oklch(0.95 0.05 30);
    --color-error-200: oklch(0.92 0.1 30);
    --color-error-300: oklch(0.85 0.15 30);
    --color-error-400: oklch(0.75 0.2 30);
    --color-error-500: oklch(0.65 0.25 30);
    --color-error-600: oklch(0.55 0.23 30);
    --color-error-700: oklch(0.45 0.2 30);
    --color-error-800: oklch(0.35 0.15 30);
    --color-error-900: oklch(0.25 0.1 30);

    /* Warning Colors */
    --color-warning-50: oklch(0.97 0.02 60);
    --color-warning-100: oklch(0.95 0.05 60);
    --color-warning-200: oklch(0.92 0.1 60);
    --color-warning-300: oklch(0.85 0.15 60);
    --color-warning-400: oklch(0.76 0.2 60);
    --color-warning-500: oklch(0.67 0.22 60);
    --color-warning-600: oklch(0.57 0.2 60);
    --color-warning-700: oklch(0.47 0.18 60);
    --color-warning-800: oklch(0.37 0.15 60);
    --color-warning-900: oklch(0.27 0.1 60);

    /* Gray Shades */
    --color-gray-50: oklch(0.98 0.005 285);
    --color-gray-100: oklch(0.93 0.005 285);
    --color-gray-200: oklch(0.85 0.005 285);
    --color-gray-300: oklch(0.75 0.005 285);
    --color-gray-400: oklch(0.65 0.01 285);
    --color-gray-500: oklch(0.55 0.01 285);
    --color-gray-600: oklch(0.45 0.01 285);
    --color-gray-700: oklch(0.35 0.01 285);
    --color-gray-800: oklch(0.25 0.005 285);
    --color-gray-900: oklch(0.15 0.005 285);

    /* Chat Specific Colors */
    --color-chat-sender-bubble: var(--color-primary-600);
    --color-chat-sender-text: var(--color-cybertext-100);
    --color-chat-recipient-bubble: var(--color-midnight-600);
    --color-chat-recipient-text: var(--color-);
    --color-chat-system-bubble: var(--color-gray-700);
    --color-chat-system-text: var(--color-primary-200);

    /* Status Indicators */
    --color-status-online: var(--color-success-500);
    --color-status-offline: var(--color-gray-500);
    --color-status-away: var(--color-warning-300);
    --color-status-busy: var(--color-error-600);

    /* Animation Stuff */
    --animation-duration-short: 0.05s;
    --animation-duration-normal: 0.2s;
    --animation-duration-long: 0.4s;
    --animation-easing-normal: ease-in-out;
    --animation-easing-bounce: cubic-bezier(0.175, 0.885, 0.32, 1.275);
    --animation-easing-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    --animation-delay-short: 0.05s;
}

body {
    @apply bg-midnight-600 text-cybertext-200 font-sans antialiased;
}

/* Animations */
@utility animate-fade-in {
    animation: fade-in var(--animation-duration-normal)
        var(--animation-easing-normal) forwards;
}

@utility animate-fade-out {
    animation: fade-out var(--animation-duration-normal)
        var(--animation-easing-normal) forwards;
}

@utility animate-scale-in {
    animation: scale-in var(--animation-duration-normal)
        var(--animation-easing-bounce) forwards;
}

@utility animate-scale-out {
    animation: scale-out var(--animation-duration-normal)
        var(--animation-easing-normal) forwards;
}

@utility stagger-children {
    & > * {
        opacity: 0;
        animation: fade-in var(--animation-duration-normal) forwards;
    }

    @for $i from 1 to 20 {
        & > *:nth-child(#{$i}) {
            animation-delay: calc(var(--animation-delay-short) * #{$i});
        }
    }
}

/* Chat Message Utilities */
@utility chat-message {
    @apply w-full rounded-sm p-2 break-words;
}

@utility chat-message-system {
    @apply chat-message text-verdant-400 bg-midnight-600 border-midnight-400 w-full max-w-2/3 rounded-xs border text-center text-sm italic;
}

@utility chat-message-continued {
    @apply chat-message mt-[2px];
}

@utility chat-message-group {
    @apply mb-4 flex flex-col;

    &:last-child {
        @apply mb-0;
    }
}

@utility user-avatar {
    @apply rounded-full border border-primary-800;
}

@utility chat-header {
    @apply mb-1 flex items-baseline px-2;
}

@utility chat-display-name {
    @apply text-electric-600 font-mono font-medium;

    &::before {
        content: "@";
        opacity: 0.8;
        margin-right: 4px;
    }
}

@utility chat-timestamp {
    @apply ml-2 text-xs text-gray-400;
    font-variant-numeric: tabular-nums;
}

@utility chat-code-block {
    @apply bg-midnight-900 text-cybertext-200 border-electric-700 my-1 overflow-x-auto rounded-xs border-l-2 p-2 font-mono text-sm;
}

@utility chat-mention {
    @apply bg-primary-900/30 text-primary-300 rounded-xs px-1 py-0.5 font-mono;

    &:hover {
        @apply bg-primary-800/40 text-primary-200;
    }
}

/* Unused Currently */
@utility chat-message-actions {
    @apply bg-midnight-800/90 absolute top-1 right-2 flex gap-1 rounded-xs p-1 opacity-0 transition-opacity;

    .chat-message-self:hover &,
    .chat-message-other:hover & {
        @apply opacity-100;
    }
}

/* Typing Indicator */
@utility chat-typing-indicator {
    @apply text-cybertext-500 flex items-center gap-1 text-xs;
}

@utility chat-typing-dots {
    @apply flex gap-1;

    span {
        @apply bg-primary-500 h-1 w-1 rounded-full;
        animation: typing-dot 1.4s infinite;

        &:nth-child(2) {
            animation-delay: 0.2s;
        }

        &:nth-child(3) {
            animation-delay: 0.4s;
        }
    }
}

@keyframes typing-dot {
    0%,
    60%,
    100% {
        transform: translateY(0);
        opacity: 0.6;
    }
    30% {
        transform: translateY(-4px);
        opacity: 1;
    }
}

/* Status Utilities */
@utility status-indicator {
    @apply border-midnight-900 relative mr-1 inline-block h-2 w-2 rounded-full border p-1;
}

@utility status-indicator-online {
    @apply status-indicator;
    background-color: var(--color-status-online);
    box-shadow: 0 0 3px var(--color-status-online);
}

@utility status-indicator-offline {
    @apply status-indicator;
    background-color: var(--color-status-offline);
}

@utility status-indicator-away {
    @apply status-indicator;
    background-color: var(--color-status-away);
    box-shadow: 0 0 3px var(--color-status-away);
}

@utility status-indicator-busy {
    @apply status-indicator;
    background-color: var(--color-status-busy);
    box-shadow: 0 0 5px var(--color-status-busy);
}

@utility animate-blink {
    animation: blink 1.5s step-end infinite;
}

@keyframes blink {
    0%,
    100% {
        opacity: 1;
    }
    50% {
        opacity: 0;
    }
}

/* Dialog/Modal Utilities */
@utility modal-overlay {
    @apply fixed inset-0 z-40 bg-black/50 backdrop-blur-xs;
    animation: fade-in 0.2s ease-out;
}

@utility modal-container {
    @apply fixed inset-0 z-50 flex items-center justify-center p-4;
    animation: scale-in 0.2s ease-out;
}

@utility modal-content {
    @apply bg-midnight-800 flex flex-col rounded-xs border border-gray-700 shadow-lg focus:outline-none;
    box-shadow:
        0 0 15px rgba(var(--color-primary-500), 0.1),
        0 0 3px rgba(var(--color-primary-400), 0.2);
}

@utility modal-header {
    @apply bg-midnight-900 flex items-center justify-between border-b border-gray-700 px-4 py-3;
}

@utility modal-title {
    @apply text-cybertext-200 font-mono text-xl;
}

@utility modal-footer {
    @apply bg-midnight-900 text-cybertext-500 border-t border-gray-700 p-3 text-xs;
}

@utility modal-exit {
    animation: fade-out 0.2s ease-out forwards;
}

@utility modal-content-exit {
    animation: scale-out 0.2s ease-out forwards;
}

@keyframes fade-in {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes fade-out {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}

@keyframes scale-in {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes scale-out {
    from {
        opacity: 1;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(0.95);
    }
}

/* Command Card Utility */
@utility command-card {
    @apply bg-midnight-800 overflow-hidden rounded-xs border border-gray-700;
    transition: all 0.2s ease;
}

@utility command-card-header {
    @apply bg-midnight-900 flex items-center justify-between border-b border-gray-700 px-3 py-2;
}

@utility command-category-tag {
    @apply bg-midnight-900 text-cybertext-500 rounded-xs px-2 py-0.5 text-xs capitalize;
}

@utility command-example {
    @apply text-cybertext-500 bg-midnight-600 border-verdant-600 rounded-xs border-l p-2 font-mono text-xs;
}

@utility command-prefix {
    @apply text-primary-400 font-mono;
}

/* Input Utility */
@utility text-input {
    @apply bg-midnight-900 focus:border-primary-500 focus:ring-2  focus:outline-none w-full rounded-xs border transition-all duration-200 ease-in-out border-gray-700 px-3 py-2;

    &:focus {
        box-shadow:
            0 0 0 1px var(--color-primary-700),
            0 0 8px rgba(var(--color-primary-500), 0.2);
    }
}

@utility text-input-icon {
    @apply relative;

    & > input {
        @apply pl-8;
    }

    &::before {
        content: "";
        position: absolute;
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
        width: 16px;
        height: 16px;
        opacity: 0.7;
    }
}

@utility search-input {
    @apply text-input text-input-icon;
}

/* Filter Utility */
@utility filter-button {
    @apply rounded-xs px-3 py-1 text-sm transition-all duration-200 ease-in-out;
}

@utility filter-button-active {
    @apply bg-primary-700 text-primary-100;
    box-shadow: 0 0 6px rgba(var(--color-primary-500), 0.3);
}

@utility filter-button-inactive {
    @apply bg-midnight-900 text-cybertext-400 hover:bg-midnight-600 cursor-pointer;

    &:hover {
        color: var(--color-cybertext-300);
    }
}

/* Empty State Utility */
@utility empty-state {
    @apply bg-midnight-500 rounded-xs border border-gray-700 p-6 text-center;
}

@utility empty-state-icon {
    @apply text-cybertext-600 mx-auto mb-3 h-8 w-8;
}

/* Channel Names */
@utility channel-name {
    @apply text-verdant-400 font-mono;

    &::before {
        content: "#";
        opacity: 0.7;
    }
}

/* User Names */
@utility user-name {
    @apply text-electric-500 font-sans;

    &::before {
        content: "@";
        opacity: 0.7;
    }
}

/* Command input field */
@utility command-input {
    @apply bg-midnight-900 border-midnight-600 text-cybertext-200 w-full rounded-xs border px-3 py-2 font-mono;

    &::before {
        content: "/";
        color: var(--color-primary-400);
        margin-right: 0.25rem;
    }
}

/* Glow Effect */
@utility text-glow {
    text-shadow: 0 0 8px currentColor;
}

/* Split-view layout */
@utility ui-layout {
    @apply grid h-screen;
    grid-template-columns: 240px 1fr;
    grid-template-rows: auto 1fr auto;
    grid-template-areas:
        "header header"
        "sidebar main"
        "footer footer";

    @media (max-width: 768px) {
        grid-template-columns: 1fr;
        grid-template-areas:
            "header"
            "main"
            "footer";
    }
}

@utility layout-sidebar {
    @apply bg-midnight-900 border-r border-gray-800;
    grid-area: sidebar;
    overflow-y: auto;
}

@utility layout-main {
    grid-area: main;
    display: flex;
    flex-direction: column;
}

@utility layout-header {
    @apply bg-midnight-900 border-b border-gray-800 p-3;
    grid-area: header;
}

@utility layout-footer {
    @apply bg-midnight-900 border-t border-gray-800 p-3;
    grid-area: footer;
}

@utility layout-messages {
    @apply flex-1 space-y-3 overflow-y-auto p-4;
    scrollbar-width: thin;
    scrollbar-color: var(--color-gray-700) var(--color-midnight-800);
}

@keyframes glitch {
    0% {
        transform: translate(0);
        text-shadow: 0 0 transparent;
    }
    2% {
        transform: translate(-2px, 1px);
        text-shadow: -1px -1px var(--color-primary-500);
    }
    4% {
        transform: translate(2px, -1px);
        text-shadow: 1px 1px var(--color-electric-500);
    }
    6% {
        transform: translate(0);
        text-shadow: 0 0 transparent;
    }
    100% {
        transform: translate(0);
        text-shadow: 0 0 transparent;
    }
}

@utility glitch-text {
    animation: glitch 3s infinite;
    display: inline-block;
}

/* Scrollbar Styling */
* {
    scrollbar-width: thin;
    scrollbar-color: var(--color-cybertext-900) var(--color-midnight-500);
}

::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

::-webkit-scrollbar-track {
    background: var(--color-midnight-900);
}

::-webkit-scrollbar-thumb {
    background: var(--color-midnight-500);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--color-electric-800);
}

::-webkit-scrollbar-corner {
    background: var(--color-midnight-900);
}

/* TODO: Figure out why I even need this reset */
input {
    @apply focus:outline-none focus:ring-0;
}
